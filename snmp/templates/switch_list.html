{% extends "index.html" %}
{% load static %}
{% block title %}Switch List{% endblock %}

{% block content %}
<div class="flex justify-between px-2 py-2">
  <a href="{% url 'switch_create' %}" class="rounded-md px-2 py-2 font-medium text-center inline-flex items-center text-xs text-white bg-emerald-600 hover:bg-emerald-800 focus:ring-2 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800">
    Create New Switch
  </a>
  <div class="ml-8">
    {% if switches.has_previous %}
      <a href="?page=1&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">&laquo; first</a>
      <a href="?page={{ switches.previous_page_number }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover-bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">previous</a>
    {% endif %}
    <span class="current-page">
      Page {{ switches.number }} of {{ switches.paginator.num_pages }}.
    </span>
    {% if switches.has_next %}
      <a href="?page={{ switches.next_page_number }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">next</a>
      <a href="?page={{ switches.paginator.num_pages }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">last &raquo;</a>
    {% endif %}
  </div>
  <form method="get">
    <div class="form-group px-2">
      <input type="text" name="search" id="search" value="{{ request.GET.search }}" class="text-neutral-200 rounded-md px-2 py-2 font-medium text-center inline-flex items-center text-xs text-white bg-neutral-600 hover:bg-neutral-800 focus:ring-2 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 form-control" placeholder="search query">
      <button type="submit" class="rounded-md px-2 py-2 font-medium text-center inline-flex items-center text-xs text-white bg-sky-600 hover:bg-sky-800 focus:ring-2 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800">Search</button>
    </div>
  </form>
</div>

<div class="relative overflow-x-auto rounded-md shadow-md sm:rounded-md px-2">
  
  <table class="w-full text-xs text-left text-neutral-500 dark:text-neutral-400">
    <thead class="text-xs uppercase">
      <tr class="bg-neutral-600 text-white dark:text-neutrall-300">
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="id">ID</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="hostname">Hostname</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="ip">IP</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="model">Model</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="status">Status</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="status">Uptime</th>
        <th scope="col" class="text-center px-2 py-2 sortable" data-column="signal">Optical info<br>Vendor | Part â„– | RX | TX</th>
        <th scope="col" class="text-center px-2 py-2">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for switch in switches %}
      <tr class="border-b border-neutral-300 dark:border-b-2 border-gray-100 text-black dark:text-neutral-200 bg-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 hover:bg-neutral-400 dark:hover:bg-neutral-600">
        <td class="text-center px-2 py-1">
          {% if switch.status %}{% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% else %}{% endif %}{% else %}{% endif %}{{ switch.pk }}{% if switch.status %}</a>{% else %}{% endif %}
        </td>
        <td class="text-center border-1 font-medium text-neutral-50 px-2 py-1 {% if switch.status %}bg-green-600{% else %}bg-red-600{% endif %}">
          {% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% else %}{% endif %}{{ switch.device_hostname }}</a>
        </td>
        <td class="text-center px-2 py-1">
          {% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% else %}{% endif %}{{ switch.device_ip }}</a>
        </td>
        <td class="text-center px-2 py-1">
          {% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% else %}{% endif %}{{ switch.device_model_local }}</a>
        </td>
        <td class="text-center px-2 py-1 font-medium {% if switch.status %}text-green-600{% else %}text-red-600{% endif %}">
          {% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% else %}{% endif %}{% if switch.status %}UP{% else %}DOWN{% endif %}</a>
        </td>
        <td class="text-center px-2 py-1 font-medium {% if switch.status %}text-green-600{% else %}text-red-600{% endif %}">
          
          {% if switch.status %}<a href="{% url 'switch_detail' switch.pk %}">{% endif %}{{ switch.uptime }}</a>
        </td>
        <td class="text-center px-2 py-1">
          {% if 'No Such' in switch.sfp_vendor  or 'No Such' in switch.part_number or switch.rx_signal is None %}Not available{% else %}
          {{ switch.sfp_vendor }} | {{ switch.part_number }} | {{ switch.rx_signal }} | {{ switch.tx_signal }}
          {% endif %}
          {% if switch.rx_signal >= 10 %}
          <a href="#" class="rounded-md px-2 py-2 font-medium text-center inline-flex items-center text-xs text-white bg-red-600">High</button>
          {% endif %}
        </td>
        
        
        <td class="text-center px-2 py-1">
          <div class="flex justify-center space-x-2">
            {% if switch.status %}
            <a href="{% url 'switch_detail' switch.pk %}" class="btn btn-info text-blue-600">
              Details
            </a>
            <a href="{% url 'switch_update' switch.pk %}" class="btn btn-warning">
              Edit
            </a>
            {% else %}
            {% endif %}
            <a href="{% url 'switch_delete' switch.pk %}" class="btn btn-danger text-red-600">
              Delete
            </a>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="py-2 flex justify-center">
  <div class="pagination">
    <span class="step-links">
      {% if switches.has_previous %}
        <a href="?page=1&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">&laquo; first</a>
        <a href="?page={{ switches.previous_page_number }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover-bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">previous</a>
      {% endif %}
      <span class="current-page">
        Page {{ switches.number }} of {{ switches.paginator.num_pages }}.
      </span>
      {% if switches.has_next %}
        <a href="?page={{ switches.next_page_number }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">next</a>
        <a href="?page={{ switches.paginator.num_pages }}&search={{ request.GET.search }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2 mr-2 mb-2 light:bg-blue-700 dark:bg-blue-600 light:hover:bg-blue-800 dark:hover:bg-blue-700 light:focus:ring-blue-300 dark:focus:ring-blue-800">last &raquo;</a>
      {% endif %}
    </span>
  </div>
</div>
{% endblock %}
